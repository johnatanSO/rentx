"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.carsRoutes = void 0;
const DeleteCarController_1 = require("./../../../../modules/cars/useCases/Car/deleteCar/DeleteCarController");
const UploadCarImageController_1 = require("../../../../modules/cars/useCases/Car/uploadCarImage/UploadCarImageController");
const CreateCarSpecificationController_1 = require("./../../../../modules/cars/useCases/Car/createCarSpecification/CreateCarSpecificationController");
const express_1 = require("express");
const ListAvaliableCarsController_1 = require("../../../../modules/cars/useCases/Car/listAvaliableCars/ListAvaliableCarsController");
const ensureAdmin_1 = require("../middlewares/ensureAdmin");
const ensureAuthenticated_1 = require("../middlewares/ensureAuthenticated");
const CreateCarController_1 = require("./../../../../modules/cars/useCases/Car/createCar/CreateCarController");
const multer_1 = __importDefault(require("multer"));
const GetCarInfoController_1 = require("../../../../modules/cars/useCases/Car/getCarInfo/GetCarInfoController");
const ListAllCarsController_1 = require("../../../../modules/cars/useCases/Car/listAllCars/ListAllCarsController");
const RemoveCarImageController_1 = require("../../../../modules/cars/useCases/Car/removeCarImage/RemoveCarImageController");
const FavoriteCarController_1 = require("../../../../modules/accounts/useCases/User/favoriteCar/FavoriteCarController");
const UpdateCarInfosController_1 = require("../../../../modules/cars/useCases/Car/updateCarInfos/UpdateCarInfosController");
const UpdateDefaultCarImageController_1 = require("../../../../modules/cars/useCases/Car/updateDefaultCarImage/UpdateDefaultCarImageController");
const upload_1 = __importDefault(require("../../../../config/upload"));
const carsRoutes = (0, express_1.Router)();
exports.carsRoutes = carsRoutes;
const uploadImage = (0, multer_1.default)(upload_1.default);
const createCarController = new CreateCarController_1.CreateCarController();
const listAvaliableCarsController = new ListAvaliableCarsController_1.ListAvaliableCarsController();
const createCarSpecificationController = new CreateCarSpecificationController_1.CreateCarSpecificationController();
const uploadCarImagesController = new UploadCarImageController_1.UploadCarImageController();
const updateDefaultCarImageController = new UpdateDefaultCarImageController_1.UpdateDefaultCarImageController();
const getCarInfoController = new GetCarInfoController_1.GetCarInfoController();
const listAllCarsController = new ListAllCarsController_1.ListAllCarsController();
const removeCarImageController = new RemoveCarImageController_1.RemoveCarImageController();
const favoriteCarController = new FavoriteCarController_1.FavoriteCarController();
const updateCarInfosController = new UpdateCarInfosController_1.UpdateCarInfosController();
const deleteCarController = new DeleteCarController_1.DeleteCarController();
carsRoutes.post('/', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, uploadImage.single('image'), createCarController.handle);
carsRoutes.get('/avaliable', listAvaliableCarsController.handle);
carsRoutes.delete('/:carId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, deleteCarController.handle);
carsRoutes.get('/', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, listAllCarsController.handle);
carsRoutes.get('/:carId', getCarInfoController.handle);
carsRoutes.post('/specifications/:carId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, createCarSpecificationController.handle);
carsRoutes.post('/favorite/:carId', ensureAuthenticated_1.ensureAuthenticated, favoriteCarController.handle);
carsRoutes.put('/:carId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, updateCarInfosController.handle);
carsRoutes.patch('/images/:carId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, uploadImage.single('image'), uploadCarImagesController.handle);
carsRoutes.patch('/images/default/:carId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, uploadImage.single('defaultImage'), updateDefaultCarImageController.handle);
carsRoutes.delete('/images/:carId/:imageId', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, removeCarImageController.handle);
