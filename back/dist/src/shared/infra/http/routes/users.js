"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.usersRoutes = void 0;
const multer_1 = __importDefault(require("multer"));
const UpdateUserAvatarController_1 = require("../../../../modules/accounts/useCases/User/updateUserAvatar/UpdateUserAvatarController");
const CreateNewUserController_1 = require("../../../../modules/accounts/useCases/User/createNewUser/CreateNewUserController");
const express_1 = require("express");
const ensureAuthenticated_1 = require("../middlewares/ensureAuthenticated");
const UpdateUserInfosController_1 = require("../../../../modules/accounts/useCases/User/updateUserInfos/UpdateUserInfosController");
const ListFavoritedCarsController_1 = require("../../../../modules/accounts/useCases/User/listFavoritedCars/ListFavoritedCarsController");
const ensureAdmin_1 = require("../middlewares/ensureAdmin");
const ListAllUsersController_1 = require("../../../../modules/accounts/useCases/User/listAllUsers/ListAllUsersController");
const SendContactController_1 = require("../../../../modules/accounts/useCases/User/sendContact/SendContactController");
const upload_1 = __importDefault(require("../../../../config/upload"));
const uploadAvatar = (0, multer_1.default)(upload_1.default);
const usersRoutes = (0, express_1.Router)();
exports.usersRoutes = usersRoutes;
const createNewUserController = new CreateNewUserController_1.CreateNewUserController();
const updateUserAvatarController = new UpdateUserAvatarController_1.UpdateUserAvatarController();
const updateUserInfosController = new UpdateUserInfosController_1.UpdateUserInfosController();
const listFavoritedCarsController = new ListFavoritedCarsController_1.ListFavoritedCarsController();
const listAllUsersController = new ListAllUsersController_1.ListAllUsersController();
const sendContactController = new SendContactController_1.SendContactController();
usersRoutes.post('/', createNewUserController.handle);
usersRoutes.put('/', ensureAuthenticated_1.ensureAuthenticated, updateUserInfosController.handle);
usersRoutes.patch('/avatar', ensureAuthenticated_1.ensureAuthenticated, uploadAvatar.single('avatar'), updateUserAvatarController.handle);
usersRoutes.get('/favorite/list', ensureAuthenticated_1.ensureAuthenticated, listFavoritedCarsController.handle);
usersRoutes.get('/list', ensureAuthenticated_1.ensureAuthenticated, ensureAdmin_1.ensureAdmin, listAllUsersController.handle);
usersRoutes.post('/contact', sendContactController.handle);
